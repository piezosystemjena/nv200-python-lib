

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Getting Started with the API &mdash; NV200 Python Library</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=5349f25f" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
      <link rel="stylesheet" type="text/css" href="_static/style_override_css/style_override.css?v=6a36a437" />
      <link rel="stylesheet" type="text/css" href="_static/style_override_css/color_roles.css?v=7881a399" />
      <link rel="stylesheet" type="text/css" href="_static/dark_mode_css/general.css?v=c0a7eb24" />
      <link rel="stylesheet" type="text/css" href="_static/dark_mode_css/dark.css?v=70edf1c7" />

  
    <link rel="shortcut icon" href="_static/favicon.png"/>
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=8d563738"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script>let toggleHintShow = 'Click to show';</script>
      <script>let toggleHintHide = 'Click to hide';</script>
      <script>let toggleOpenOnPrint = 'true';</script>
      <script src="_static/togglebutton.js?v=4a39c7ea"></script>
      <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
      <script src="_static/dark_mode_js/default_light.js?v=c2e647ce"></script>
      <script src="_static/dark_mode_js/theme_switcher.js?v=358d3910"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="PID Controller and Filters" href="pid_and_filters.html" />
    <link rel="prev" title="Connecting to device" href="connecting.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            NV200 Python Library
              <img src="_static/piezosystem_logo_white.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="connecting.html">Connecting to device</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Getting Started with the API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#high-level-device-functions">High-Level Device Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#generic-read-write-methods">Generic Read/Write Methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="#command-parameter-caching">Command Parameter Caching</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#purpose-of-the-cache">Purpose of the Cache</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-to-enable-or-disable-the-cache">How to Enable or Disable the Cache</a></li>
<li class="toctree-l3"><a class="reference internal" href="#when-to-enable-or-disable-the-cache">When to Enable or Disable the Cache</a></li>
<li class="toctree-l3"><a class="reference internal" href="#clearing-the-command-cache">Clearing the Command Cache</a></li>
<li class="toctree-l3"><a class="reference internal" href="#summary">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#actuator-configuration-backup">Actuator Configuration Backup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#why-back-up-actuator-parameters">Why Back Up Actuator Parameters?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#exporting-actuator-configuration">Exporting Actuator Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#restoring-actuator-configuration">Restoring Actuator Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#best-practices">Best Practices</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pid_and_filters.html">PID Controller and Filters</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_recorder.html">Data Recorder</a></li>
<li class="toctree-l1"><a class="reference internal" href="trigger_io.html">Trigger In and Trigger Out</a></li>
<li class="toctree-l1"><a class="reference internal" href="waveform_generator.html">Waveform Generator</a></li>
<li class="toctree-l1"><a class="reference internal" href="analysis.html">Resonance Measurement</a></li>
<li class="toctree-l1"><a class="reference internal" href="spi_box.html">SPI Controller Box</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">NV200 Python Library</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Getting Started with the API</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="getting-started-with-the-api">
<h1>Getting Started with the API<a class="headerlink" href="#getting-started-with-the-api" title="Link to this heading"></a></h1>
<section id="high-level-device-functions">
<h2>High-Level Device Functions<a class="headerlink" href="#high-level-device-functions" title="Link to this heading"></a></h2>
<p>If you have a properly connected <a class="reference internal" href="api.html#nv200.nv200_device.NV200Device" title="nv200.nv200_device.NV200Device"><code class="xref any py py-class docutils literal notranslate"><span class="pre">NV200Device</span></code></a> instance, you can start using the API of
the NV200 library. The high-level functions provide a user-friendly interface for common device
operations such as setting control modes, updating setpoints, or querying the current position.
They are designed to cover typical use cases and abstract away low-level communication details.</p>
<p>The following example shows, how to position the device in closed loop mode and then
read the current position of the device using the high-level API:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">asyncio</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">nv200.nv200_device</span><span class="w"> </span><span class="kn">import</span> <span class="n">NV200Device</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">nv200.shared_types</span><span class="w"> </span><span class="kn">import</span> <span class="n">PidLoopMode</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">nv200.connection_utils</span><span class="w"> </span><span class="kn">import</span> <span class="n">connect_to_single_device</span>


<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">move_closed_loop</span><span class="p">():</span>
<span class="w">   </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">   Moves the device to a specified position using closed-loop control.</span>
<span class="sd">   &quot;&quot;&quot;</span>
   <span class="n">dev</span> <span class="o">=</span> <span class="k">await</span> <span class="n">connect_to_single_device</span><span class="p">(</span><span class="n">NV200Device</span><span class="p">)</span>
   <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Connected to device: </span><span class="si">{</span><span class="n">dev</span><span class="o">.</span><span class="n">device_info</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

   <span class="k">await</span> <span class="n">dev</span><span class="o">.</span><span class="n">move_to_position</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
   <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.2</span><span class="p">)</span>
   <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Current position: </span><span class="si">{</span><span class="k">await</span><span class="w"> </span><span class="n">dev</span><span class="o">.</span><span class="n">get_current_position</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

   <span class="c1"># instead of using move_to_position, you can also use two separate commands</span>
   <span class="c1"># to set the PID mode and the setpoint</span>
   <span class="k">await</span> <span class="n">dev</span><span class="o">.</span><span class="n">set_pid_mode</span><span class="p">(</span><span class="n">PidLoopMode</span><span class="o">.</span><span class="n">CLOSED_LOOP</span><span class="p">)</span>
   <span class="k">await</span> <span class="n">dev</span><span class="o">.</span><span class="n">set_setpoint</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
   <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.2</span><span class="p">)</span>
   <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Current position: </span><span class="si">{</span><span class="k">await</span><span class="w"> </span><span class="n">dev</span><span class="o">.</span><span class="n">get_current_position</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
   <span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">move_closed_loop</span><span class="p">())</span>
</pre></div>
</div>
</section>
<section id="generic-read-write-methods">
<h2>Generic Read/Write Methods<a class="headerlink" href="#generic-read-write-methods" title="Link to this heading"></a></h2>
<p>These methods offer low-level access to the device’s command interface.
They are useful for advanced users who need direct control or want to access features not
covered by the high-level API. Some of the generic methods are:</p>
<ul class="simple">
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">write()</span></code></p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">read()</span></code></p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">read_response()</span></code></p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">read_values()</span></code></p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">read_float_value()</span></code></p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">read_int_value()</span></code></p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">read_string_value()</span></code></p></li>
</ul>
<p>The following example shows how to use the generic read/write methods to read and write
device parameters in a generic low-level way:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">asyncio</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">nv200.nv200_device</span><span class="w"> </span><span class="kn">import</span> <span class="n">NV200Device</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">nv200.connection_utils</span><span class="w"> </span><span class="kn">import</span> <span class="n">connect_to_single_device</span>

<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">read_write_tests</span><span class="p">():</span>
<span class="w">   </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">   Test some generic low-level read/write methods</span>
<span class="sd">   &quot;&quot;&quot;</span>
   <span class="n">dev</span> <span class="o">=</span> <span class="k">await</span> <span class="n">connect_to_single_device</span><span class="p">(</span><span class="n">NV200Device</span><span class="p">)</span>
   <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Connected to device: </span><span class="si">{</span><span class="n">dev</span><span class="o">.</span><span class="n">device_info</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
   <span class="k">await</span> <span class="n">dev</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;cl,0&#39;</span><span class="p">)</span>
   <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">dev</span><span class="o">.</span><span class="n">read_response_string</span><span class="p">(</span><span class="s1">&#39;cl&#39;</span><span class="p">)</span>
   <span class="nb">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>
   <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">dev</span><span class="o">.</span><span class="n">read_response</span><span class="p">(</span><span class="s1">&#39;set&#39;</span><span class="p">)</span>
   <span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
   <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">dev</span><span class="o">.</span><span class="n">read_values</span><span class="p">(</span><span class="s1">&#39;recout,0,0,1&#39;</span><span class="p">)</span>
   <span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
   <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">dev</span><span class="o">.</span><span class="n">read_float_value</span><span class="p">(</span><span class="s1">&#39;set&#39;</span><span class="p">)</span>
   <span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
   <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">dev</span><span class="o">.</span><span class="n">read_int_value</span><span class="p">(</span><span class="s1">&#39;cl&#39;</span><span class="p">)</span>
   <span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
   <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">dev</span><span class="o">.</span><span class="n">read_string_value</span><span class="p">(</span><span class="s1">&#39;desc&#39;</span><span class="p">)</span>
   <span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
   <span class="k">await</span> <span class="n">dev</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
   <span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">read_write_tests</span><span class="p">())</span>
</pre></div>
</div>
<p>The expected output of the above example is:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Connected to device: Telnet @ 192.168.101.2 - NV200/D_NET
&#39;cl,0\r\x00\n&#39;
(&#39;set&#39;, [&#39;0.000&#39;])
[&#39;0&#39;, &#39;0&#39;, &#39;2.580&#39;]
0.0
0
PSH20
</pre></div>
</div>
<p>So if you do not find a specific function in the high-level API, you can use the generic read/write methods
to access the device parameters directly. The generic methods are also useful for debugging purposes.</p>
</section>
<section id="command-parameter-caching">
<h2>Command Parameter Caching<a class="headerlink" href="#command-parameter-caching" title="Link to this heading"></a></h2>
<p>The <a class="reference internal" href="api.html#nv200.device_base.PiezoDeviceBase" title="nv200.device_base.PiezoDeviceBase"><code class="xref any py py-class docutils literal notranslate"><span class="pre">PiezoDeviceBase</span></code></a> class provides an optional <strong>command result caching</strong> mechanism to optimize read
performance for piezoelectric device communication. This section explains the purpose of this cache,
how to control it, when to use it, and provides usage examples.</p>
<section id="purpose-of-the-cache">
<h3>Purpose of the Cache<a class="headerlink" href="#purpose-of-the-cache" title="Link to this heading"></a></h3>
<p>The piezoelectric devices such as the NV200/D are accessed via transport protocols like <strong>serial</strong> or <strong>telnet</strong>,
which can introduce communication latency. When applications (e.g., GUIs) frequently request the same values
(such as current position, mode, or configuration), re-reading those values over the wire can become inefficient.</p>
<p>The caching mechanism in <a class="reference internal" href="api.html#nv200.device_base.PiezoDeviceBase" title="nv200.device_base.PiezoDeviceBase"><code class="xref any py py-class docutils literal notranslate"><span class="pre">PiezoDeviceBase</span></code></a> stores the result of frequently-read commands locally.
If caching is enabled and a requested command is cached, the device will <strong>not</strong> be queried again—instead,
the cached value will be returned immediately. This is especially useful for:</p>
<ul class="simple">
<li><p>Polling the same parameter at high frequency</p></li>
<li><p>Avoiding redundant communication</p></li>
<li><p>Reducing delays in latency-sensitive applications</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Caching only applies to commands that are explicitly marked as cacheable in the concrete
device class (see below) - that means it only applies to commands that are defined in the
<a class="reference internal" href="api.html#nv200.device_base.PiezoDeviceBase.CACHEABLE_COMMANDS" title="nv200.device_base.PiezoDeviceBase.CACHEABLE_COMMANDS"><code class="xref any py py-attr docutils literal notranslate"><span class="pre">CACHEABLE_COMMANDS</span></code></a> set of the concrete device class.</p>
</div>
</section>
<section id="how-to-enable-or-disable-the-cache">
<h3>How to Enable or Disable the Cache<a class="headerlink" href="#how-to-enable-or-disable-the-cache" title="Link to this heading"></a></h3>
<p>Caching is controlled via the class variable <a class="reference internal" href="api.html#id0" title="nv200.device_base.PiezoDeviceBase.CMD_CACHE_ENABLED"><code class="xref any py py-attr docutils literal notranslate"><span class="pre">CMD_CACHE_ENABLED</span></code></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">PiezoDeviceBase</span><span class="o">.</span><span class="n">CMD_CACHE_ENABLED</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># or False</span>
</pre></div>
</div>
<p>When set to <code class="docutils literal notranslate"><span class="pre">True</span></code> (default), caching is enabled for all cacheable commands defined in the concrete device’s
<a class="reference internal" href="api.html#nv200.device_base.PiezoDeviceBase.CACHEABLE_COMMANDS" title="nv200.device_base.PiezoDeviceBase.CACHEABLE_COMMANDS"><code class="xref any py py-attr docutils literal notranslate"><span class="pre">CACHEABLE_COMMANDS</span></code></a> set. When <code class="docutils literal notranslate"><span class="pre">False</span></code>, all caching behavior is disabled globally.</p>
<p>You can override this at runtime:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">asyncio</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">nv200.connection_utils</span><span class="w"> </span><span class="kn">import</span> <span class="n">connect_to_single_device</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">nv200.nv200_device</span><span class="w"> </span><span class="kn">import</span> <span class="n">NV200Device</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">nv200.device_base</span><span class="w"> </span><span class="kn">import</span> <span class="n">PiezoDeviceBase</span>

<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">main_async</span><span class="p">():</span>
   <span class="n">device</span> <span class="o">=</span> <span class="k">await</span> <span class="n">connect_to_single_device</span><span class="p">(</span><span class="n">NV200Device</span><span class="p">)</span>
   <span class="n">PiezoDeviceBase</span><span class="o">.</span><span class="n">CMD_CACHE_ENABLED</span> <span class="o">=</span> <span class="kc">False</span>  <span class="c1"># disable globally</span>
   <span class="n">pidmode</span> <span class="o">=</span> <span class="k">await</span> <span class="n">device</span><span class="o">.</span><span class="n">get_pid_mode</span><span class="p">()</span> <span class="c1"># always reads from device</span>
   <span class="nb">print</span><span class="p">(</span><span class="n">pidmode</span><span class="p">)</span>

   <span class="n">PiezoDeviceBase</span><span class="o">.</span><span class="n">CMD_CACHE_ENABLED</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># enable globally</span>
   <span class="n">pidmode</span> <span class="o">=</span> <span class="k">await</span> <span class="n">device</span><span class="o">.</span><span class="n">get_pid_mode</span><span class="p">()</span>  <span class="c1"># uses cache if available</span>
   <span class="nb">print</span><span class="p">(</span><span class="n">pidmode</span><span class="p">)</span>

<span class="c1"># Running the async main function</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
   <span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">main_async</span><span class="p">())</span>
</pre></div>
</div>
</section>
<section id="when-to-enable-or-disable-the-cache">
<h3>When to Enable or Disable the Cache<a class="headerlink" href="#when-to-enable-or-disable-the-cache" title="Link to this heading"></a></h3>
<p><strong>✅ Enable the cache when:</strong></p>
<ul class="simple">
<li><p>Your application is the <strong>only</strong> process accessing the device.</p></li>
<li><p>Values you read do not change unexpectedly - such as read-only like maximum or minimum position</p></li>
<li><p>You want to improve performance or reduce traffic.</p></li>
</ul>
<p><strong>❌ Disable the cache when:</strong></p>
<ul class="simple">
<li><p>Multiple applications or users are interacting with the same device.</p></li>
<li><p>Device values may change outside your control (e.g., via a serial console).</p></li>
<li><p>You need guaranteed up-to-date values on each read.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If there is <em>any</em> chance that another process modifies the device state in parallel,
caching should be <strong>disabled</strong> to avoid serving outdated values.</p>
</div>
</section>
<section id="clearing-the-command-cache">
<h3>Clearing the Command Cache<a class="headerlink" href="#clearing-the-command-cache" title="Link to this heading"></a></h3>
<p>You can clear the local cache manually using the <a class="reference internal" href="api.html#nv200.device_base.PiezoDeviceBase.clear_cmd_cache" title="nv200.device_base.PiezoDeviceBase.clear_cmd_cache"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">clear_cmd_cache()</span></code></a> method. This is useful if:</p>
<ul class="simple">
<li><p>You suspect the cache is stale.</p></li>
<li><p>You’ve temporarily disabled caching and want to refresh once re-enabled.</p></li>
<li><p>You know the device state has changed externally and need to invalidate local values.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">await</span> <span class="n">device</span><span class="o">.</span><span class="n">get_max_position</span><span class="p">()</span>         <span class="c1"># This will be cached</span>
<span class="n">device</span><span class="o">.</span><span class="n">clear_cmd_cache</span><span class="p">()</span>                <span class="c1"># Clear the cache</span>
<span class="k">await</span> <span class="n">device</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">get_max_position</span><span class="p">()</span>  <span class="c1"># This forces a re-read from the device</span>
</pre></div>
</div>
</section>
<section id="summary">
<h3>Summary<a class="headerlink" href="#summary" title="Link to this heading"></a></h3>
<p>Caching in <a class="reference internal" href="api.html#nv200.device_base.PiezoDeviceBase" title="nv200.device_base.PiezoDeviceBase"><code class="xref any py py-class docutils literal notranslate"><span class="pre">PiezoDeviceBase</span></code></a> is a powerful tool to reduce communication overhead and
latency when interacting with piezo devices. <a class="reference internal" href="api.html#id0" title="nv200.device_base.PiezoDeviceBase.CMD_CACHE_ENABLED"><code class="xref any py py-attr docutils literal notranslate"><span class="pre">CMD_CACHE_ENABLED</span></code></a> provides a simple global
toggle, and all commands listed in <a class="reference internal" href="api.html#nv200.device_base.PiezoDeviceBase.CACHEABLE_COMMANDS" title="nv200.device_base.PiezoDeviceBase.CACHEABLE_COMMANDS"><code class="xref any py py-attr docutils literal notranslate"><span class="pre">CACHEABLE_COMMANDS</span></code></a> in each concrete subclass will
automatically benefit from caching when enabled.</p>
</section>
</section>
<section id="actuator-configuration-backup">
<h2>Actuator Configuration Backup<a class="headerlink" href="#actuator-configuration-backup" title="Link to this heading"></a></h2>
<p>The <a class="reference internal" href="api.html#nv200.nv200_device.NV200Device" title="nv200.nv200_device.NV200Device"><code class="xref any py py-class docutils literal notranslate"><span class="pre">NV200Device</span></code></a> class provides functionality to interact with the actuator’s nonvolatile
memory (EEPROM), which stores actuator-specific control parameters such as filter settings,
control loop gains, and modulation modes.</p>
<p>Because these parameters are persistent and <strong>can be overwritten</strong> during normal use
of the Python library, it is essential to <strong>back up the original configuration</strong> before
making changes. This enables safe experimentation with tuning or settings,
while ensuring the ability to restore the default factory configuration if needed.</p>
<section id="why-back-up-actuator-parameters">
<h3>Why Back Up Actuator Parameters?<a class="headerlink" href="#why-back-up-actuator-parameters" title="Link to this heading"></a></h3>
<p>Actuators connected to the NV200 amplifier store important default control parameters in their EEPROM. These include:</p>
<ul class="simple">
<li><p>Low-pass and notch filter settings</p></li>
<li><p>PID gains (kp, ki, kd)</p></li>
<li><p>Closed-loop control settings</p></li>
</ul>
<p>Changing these values programmatically will overwrite them in the actuator’s nonvolatile memory.
If the new parameters are incorrect or unstable, it may degrade device performance or behavior.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Always <strong>export and save</strong> the actuator configuration <strong>before</strong> writing or experimenting with actuator parameters.</p>
</div>
</section>
<section id="exporting-actuator-configuration">
<h3>Exporting Actuator Configuration<a class="headerlink" href="#exporting-actuator-configuration" title="Link to this heading"></a></h3>
<p>Use the <a class="reference internal" href="api.html#nv200.nv200_device.NV200Device.export_actuator_config" title="nv200.nv200_device.NV200Device.export_actuator_config"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">export_actuator_config()</span></code></a> method to read and save the current actuator configuration to an INI file.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">saved_path</span> <span class="o">=</span> <span class="k">await</span> <span class="n">device</span><span class="o">.</span><span class="n">export_actuator_config</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="s2">&quot;configs&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>This will:</p>
<ul class="simple">
<li><p>Query a predefined list of parameters from the actuator EEPROM.</p></li>
<li><p>Save them to a standard INI file.</p></li>
<li><p>Use the actuator’s description and serial number for the default filename if not specified.</p></li>
</ul>
<p>Parameters saved include:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">export_keys</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;desc&quot;</span><span class="p">,</span>
    <span class="s2">&quot;acserno&quot;</span><span class="p">,</span>
    <span class="s2">&quot;sr&quot;</span><span class="p">,</span>
    <span class="s2">&quot;setlpon&quot;</span><span class="p">,</span>
    <span class="s2">&quot;setlpf&quot;</span><span class="p">,</span>
    <span class="s2">&quot;kp&quot;</span><span class="p">,</span>
    <span class="s2">&quot;kd&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ki&quot;</span><span class="p">,</span>
    <span class="s2">&quot;notchf&quot;</span><span class="p">,</span>
    <span class="s2">&quot;notchb&quot;</span><span class="p">,</span>
    <span class="s2">&quot;notchon&quot;</span><span class="p">,</span>
    <span class="s2">&quot;poslpon&quot;</span><span class="p">,</span>
    <span class="s2">&quot;poslpf&quot;</span><span class="p">,</span>
    <span class="s2">&quot;modsrc&quot;</span><span class="p">,</span>
    <span class="s2">&quot;cl&quot;</span><span class="p">,</span>
    <span class="s2">&quot;pcf&quot;</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>
</div>
<p>If no path or filename is provided, the file will be saved in the current directory under a name like:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>actuator_conf_&lt;desc&gt;_&lt;acserno&gt;.ini
</pre></div>
</div>
<p>So for example, if the actuator description is “TRITOR100SG” and the serial number is “85533”,
the file will be named:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>actuator_conf_TRITOR100SG _85533.ini
</pre></div>
</div>
<p>This is the layout of the exported INI file for a TRITOR100SG actuator with serial number 85533:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[Actuator Configuration]</span>
<span class="na">desc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">TRITOR100SG</span>
<span class="na">acserno</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">85533</span>
<span class="na">sr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">50.000</span>
<span class="na">setlpon</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">0</span>
<span class="na">setlpf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">200</span>
<span class="na">kp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">0.000</span>
<span class="na">kd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">0.000</span>
<span class="na">ki</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">70.000</span>
<span class="na">notchf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">100</span>
<span class="na">notchb</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">200</span>
<span class="na">notchon</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">0</span>
<span class="na">poslpon</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">1</span>
<span class="na">poslpf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">1000.000</span>
<span class="na">modsrc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">0</span>
<span class="na">cl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">1</span>
<span class="na">pcf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">0.000000e+00,0.000000e+00,0.000000e+00</span>
</pre></div>
</div>
</section>
<section id="restoring-actuator-configuration">
<h3>Restoring Actuator Configuration<a class="headerlink" href="#restoring-actuator-configuration" title="Link to this heading"></a></h3>
<p>If needed, you can restore a previously saved configuration using the <a class="reference internal" href="api.html#nv200.nv200_device.NV200Device.import_actuator_config" title="nv200.nv200_device.NV200Device.import_actuator_config"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">import_actuator_config()</span></code></a> method:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">await</span> <span class="n">device</span><span class="o">.</span><span class="n">import_actuator_config</span><span class="p">(</span><span class="s2">&quot;configs/actuator_conf_TRITOR100SG _85533.ini&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>This will restore the actuator parameters from the specified INI file,
overwriting the current settings in the actuator’s EEPROM.</p>
</section>
<section id="best-practices">
<h3>Best Practices<a class="headerlink" href="#best-practices" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Always export</strong> actuator settings before making changes.</p></li>
<li><p>Use version control (e.g., Git) to track configuration history in team projects.</p></li>
<li><p>Consider re-importing the backup configuration after tests to reset the actuator to its original state.</p></li>
</ul>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="connecting.html" class="btn btn-neutral float-left" title="Connecting to device" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="pid_and_filters.html" class="btn btn-neutral float-right" title="PID Controller and Filters" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2026, piezosystem Jena.
      <span class="lastupdated">Last updated on Jan 19, 2026 08:59.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>